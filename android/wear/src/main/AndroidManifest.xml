<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.audiobookshelf.app.wear">

    <uses-feature android:name="android.hardware.type.watch" />
    <uses-permission android:name="android.permission.WAKE_LOCK" />
    <!-- Required for reading/writing assets if they come from external sources,
         or if saving to external storage on watch (less common).
         For internal storage, this isn't strictly needed for file access itself,
         but good if any URI manipulation implies it. -->
    <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" android:maxSdkVersion="28" />


    <application
        android:name=".WearApplication"
        android:allowBackup="true"
        android:icon="@mipmap/ic_launcher"
        android:label="@string/app_name"
        android:supportsRtl="true"
        android:theme="@android:style/Theme.DeviceDefault">
        <activity
            android:name=".MainActivity"
            android:exported="true"
            android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".PlayerActivity"
            android:exported="false"
            android:label="@string/title_activity_player">
            <!-- No intent-filter needed as it's launched internally -->
        </activity>

        <service
            android:name=".WatchWearableListenerService"
            android:exported="true">
            <intent-filter>
                <action android:name="com.google.android.gms.wearable.DATA_CHANGED" />
                <action android:name="com.google.android.gms.wearable.MESSAGE_RECEIVED" />
                <!-- Filter by path prefix for DataItems and Messages if needed, or host -->
                <!-- Example: <data android:scheme="wear" android:host="*" android:pathPrefix="/download/"/> -->
                <!-- For DATA_CHANGED, pathPrefix is often more useful -->
                <data android:scheme="wear" android:host="*" android:pathPrefix="/download/asset/" />
                <data android:scheme="wear" android:host="*" android:pathPrefix="/download/status/" />
            </intent-filter>
        </service>

    </application>
</manifest>
